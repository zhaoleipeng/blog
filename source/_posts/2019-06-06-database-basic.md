---
title: 数据库基础概念
date: 2019-06-06 17:24:27
tags: [ 数据库 ]
categories: 技术
toc: true
---

## 一、数据库事务的四个特性 ACID

`Atomicity(原子性)` `Consistency(一致性)` `Isolution(隔离性)` `Durability(持久性)`
<!-- more -->
- **原子性**
  原子性是指事务包含的所有操作要么全部成功，要么全部失败回滚，这和前面两篇博客介绍事务的功能是一样的概念，因此事务的操作如果成功就必须要完全应用到数据库，如果操作失败则不能对数据库有任何影响。

- **一致性**
  一致性是指事务必须使数据库从一个一致性状态变换到另一个一致性状态，也就是说一个事务执行之前和执行之后都必须处于一致性状态。
  > 数据库事物的一致性就规定了事物提交前后，永远只可能存在事物提交前的状态和事物提交后的状态，从一个一致性的状态到另一个一致性状态，而不可能出现中间的过程态。也就是说事物的执行结果是量子化状态，而不是线性状态。

- **隔离性**
  事务的隔离性，基于原子性和一致性，因为事物是原子化，量子化的，所以，事物可以有多个原子包的形式并发执行，但是，每个事务相互隔离(具体的隔离级别是按数据库的情况定的)。
  > 当数据库上有多个事务同时执行的时候，就可能出现`脏读(dirt readd)`、`不可重复读(non-repeatable reareadd)`和`幻读(phantom read d)`

- **持久性**
  事务只要提交了，数据库状态会永远发生变化，即使宕机了。

## 二、隔离性特别说明

### 隔离引发的问题

`脏读(dirty read)` `不可重复读(non-repeatable rearead)` `幻读(phantom read)`

### 隔离的四个级别

`读未提交(read uncommitted)` `读提交(read committed)` `可重复读(repeatable read)` `串行化(serializable)`
  
- **读未提交**
  一个事务还没提交时，变更就可以被别的事务看到。

- **读提交**
  一个事务提交之后，它做的变更才会被其他事务看到。

- **可重复读**
  一个事务执行的过程中看到的数据，总是跟这个事务再启动时看到的数据是一致的。在此隔离级别下，未提交变更对其他事务也是不可见的。

- **串行化**
  对于同一行记录，“写”会加“写锁”，“读”会加“读锁”。当出现读写锁冲突的时候，后访问的事务必须等前一个事务执行完成，才能继续执行。
